FROM dixajangid/selenium-base:latest


ARG MINIO_ENDPOINT
ARG MINIO_ACCESS_KEY
ARG MINIO_SECRET_KEY

ENV endpoint $MINIO_ENDPOINT
ENV accessKey $MINIO_ACCESS_KEY
ENV secretKey $MINIO_SECRET_KEY


RUN mc alias set myminio $endpoint $accessKey $secretKey && \
    mkdir -p /app/minio-allure-report && chmod -R 777 /app/minio-allure-report && \
    mc cp --recursive myminio/allure-reports/whitefalcon/allure-results ~/app/minio-allure-report
    
# Copy the repository files to the container
COPY . /app


CMD pytest -v -s --alluredir=/app/minio-allure-report ; chmod -R 777 /app/minio-allure-report 
